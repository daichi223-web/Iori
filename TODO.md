# Iori Development Tasks

## 📁 Iori生成ファイル管理ルール

**すべてのIori生成ファイルは `iori-generated/` フォルダに格納すること**

```
iori-generated/
├── web/              # Web公開用（URL: /iori/）
│   └── games/        # ゲーム類
├── code/             # コード（移動不要な場合は src/ に配置）
│   ├── utils/        # ユーティリティ関数
│   └── core/         # コア機能
└── reports/          # レポート・ドキュメント
```

**公開URL:**
- `iori-generated/web/games/game.html` → `http://localhost:3000/iori/games/game.html`

---

## 完了済みタスク

- [x] `src/frontend/server.ts` を作成する。
    - 機能: Expressサーバーをポート3000で起動する。
    - ルート `/` で `src/frontend/index.html` を配信する。
    - ルート `/api/logs` で `iori_system.log` の中身をJSON形式で返す。
    - ルート `/api/todos` で `TODO.md` の中身を返す。
    - `cors` を有効にすること。

- [x] `src/frontend/index.html` を作成する。
    - デザイン: Apple風モダンUI（グラスモーフィズム、ダークモード対応）
    - 機能:
        1. `/api/logs` からデータを取得し、リアルタイム風にログを表示するエリア。
        2. `/api/todos` からデータを取得し、現在のタスクリストを表示するエリア。
        3. 2秒ごとに自動更新するJavaScriptを含めること。

## 新規タスク

- [x] `src/utils/divide.ts` を作成する。
    - 機能: 除算関数（2つの数値を受け取り、割り算の結果を返す）
    - 要件:
        1. TypeScriptで型安全に実装すること
        2. ゼロ除算のエラーハンドリングを含めること
        3. JSDocコメントを追加すること
        4. 入力検証（有限数チェック）を実装すること

- [x] `src/frontend/public/game.html` の品質改善を行う。
    - 機能: 既存のスペースインベーダーゲームの改善
    - 要件:
        1. パワーアップアイテムを追加（シールド、3-way弾、スピードアップ）
        2. 効果音とビジュアルエフェクトを強化（爆発アニメーション、パーティクル）
        3. ハイスコア機能を追加（localStorage使用）
        4. モバイル対応（タッチ操作サポート）
        5. ボスキャラを5レベルごとに追加
        6. Apple風UIガイドラインに準拠したゲームオーバー画面とメニュー

- [x] `src/frontend/public/game.html` のディープリサーチと完成度向上を行う。
    - 目的: 業界標準レベルのゲーム体験を実現
    - リサーチ対象:
        1. 成功したブラウザゲーム（Agar.io, Slither.io, 2048等）のUX設計
        2. モダンなインディーゲームのゲームデザイン原則
        3. Web Audio APIを使った効果音実装のベストプラクティス
        4. Canvas最適化とパフォーマンスチューニング手法
        5. アクセシビリティガイドライン（WCAG準拠）
    - 実装要件:
        1. **サウンドシステム**: Web Audio APIで効果音とBGM実装（射撃音、爆発音、レベルアップファンファーレ、緊張感のあるBGM）
        2. **チュートリアル**: 初回プレイ時のインタラクティブガイド（スキップ可能）
        3. **ゲームバランス調整**: 難易度曲線の最適化（レベル1-3: 簡単、4-7: 中程度、8+: 高難易度）
        4. **敵AIパターン**: 複数の移動パターン（ジグザグ、急降下、ランダム移動）
        5. **コンボシステム**: 連続撃破でスコア倍率アップ（視覚的フィードバック付き）
        6. **一時停止機能**: ESCキーでポーズメニュー表示
        7. **設定画面**: 音量調整、難易度選択、キーコンフィグ
        8. **パフォーマンス最適化**: オブジェクトプーリング、描画最適化、60FPS安定化
        9. **視覚的フィードバック強化**: スクリーンシェイク、スローモーション演出、ダメージ時の無敵時間表示
        10. **アチーブメントシステム**: 実績解除（初クリア、ノーダメージクリア、ハイスコア到達等）
        11. **レスポンシブUI**: 画面サイズに応じた自動調整
        12. **アクセシビリティ**: キーボードナビゲーション、色覚異常対応、ARIA属性
    - デザイン原則:
        1. ゲームループの明確化（プレイ → フィードバック → 報酬 → 次のチャレンジ）
        2. プレイヤーの学習曲線を考慮した段階的難易度上昇
        3. 即座のフィードバック（アクションに対する視覚・聴覚反応）
        4. リプレイ性の向上（ランダム要素、スコアアタック要素）
