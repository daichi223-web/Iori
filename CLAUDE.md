# Claude Code Development Guidelines

このプロジェクトで Claude Code が従うべき開発ルールです。

## コア原則

### 1. TypeScript 必須
- すべてのコードは TypeScript で記述
- 型安全性を最優先
- `any` 型の使用は最小限に

### 2. テスト駆動開発 (TDD)
**すべての実装は必ずこの順序で：**
1. **RED**: テストを先に書く（失敗することを確認）
2. **GREEN**: 最小限のコードでテストを通す
3. **REFACTOR**: コードを整理・改善

### 3. ファイルサイズ制限
- 1ファイルあたり **500行以内**
- 超える場合は機能ごとに分割

### 4. コード品質基準
- カバレッジ 80% 以上
- ESLint/Prettier でフォーマット
- 明確な命名規則

## ディレクトリ構造

```
src/
├── __tests__/          # テストファイル
├── api/                # API エンドポイント
├── services/           # ビジネスロジック
├── models/             # データモデル
└── utils/              # ユーティリティ関数
```

## 開発フロー

### 新機能追加時
1. `src/__tests__/[機能名].test.ts` にテストを作成
2. テストが失敗することを確認 (`npm test`)
3. 実装ファイルを作成
4. テストが通るまで実装
5. リファクタリング

### コードレビュー基準
- テストカバレッジが維持されているか
- 型定義が適切か
- 500行制限を守っているか
- TDD の手順を踏んでいるか

## 命名規則
- ファイル: `kebab-case.ts`
- クラス: `PascalCase`
- 関数/変数: `camelCase`
- 定数: `UPPER_SNAKE_CASE`
- テストファイル: `[名前].test.ts`

## 禁止事項
- テストなしの実装
- `any` 型の乱用
- 500行を超えるファイル
- console.log のコミット（デバッグ用は除く）

## Claude Code への指示例

```
「ユーザー認証機能を TDD で追加して」
→ Claude が自動的にテスト→実装→リファクタの順で進めます

「このコードをレビューして」
→ 上記基準でチェックします

「タスクを分解して」
→ 実装可能な小さなステップに分割します
```

## 参考
- [Jest ドキュメント](https://jestjs.io/)
- [TypeScript ハンドブック](https://www.typescriptlang.org/docs/)
